{% extends 'base.html' %}
{% block content %}
<section class="card">
  <h2>Admin</h2>
  <div class="grid">
    <div>
      <h3>Fodrászok</h3>
      <form action="/admin/stylist/add" method="post" class="stack">
        <input name="name" placeholder="Név" required />
        <input name="work_days" placeholder="Munkanapok (Mon,Tue,...)" />
        <div class="row"><input name="start_hour" type="number" value="9" min="0" max="23"/><input name="end_hour" type="number" value="17" min="0" max="23"/></div>
        <button class="secondary">Hozzáadás</button>
      </form>
      <ul>
        {% for s in stylists %}<li>{{ s.name }} ({{ s.start_hour }}-{{ s.end_hour }})</li>{% endfor %}
      </ul>
    </div>
    <div>
      <h3>Szolgáltatások</h3>
      <form action="/admin/service/add" method="post" class="stack">
        <input name="name" placeholder="Szolgáltatás" required/>
        <div class="row"><input name="duration" type="number" value="30" /> <input name="price" type="number" value="0" /></div>
        <button class="secondary">Hozzáadás</button>
      </form>
      <ul>{% for sv in services %}<li>{{ sv.name }} — {{ sv.duration_minutes }} perc — {{ sv.price }} Ft</li>{% endfor %}</ul>
    </div>
    <div>
      <h3>Foglalások</h3>
      <table>
        <thead><tr><th>ID</th><th>Név</th><th>Tel.</th><th>Szolg.</th><th>Fodrász</th><th>Dátum</th><th></th></tr></thead>
        <tbody>
          {% for b in bookings %}
          <tr>
            <td>{{ b.id }}</td>
            <td>{{ b.client_name }}</td>
            <td>{{ b.client_phone }}</td>
            <td>{{ b.service_id }}</td>
            <td>{{ b.stylist_id }}</td>
            <td>{{ b.start_datetime }}</td>
            <td>
              <form method="post" action="/admin/booking/delete/{{ b.id }}" onsubmit="return confirm('Törölni?');"><button class="danger">Törlés</button></form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</section>
{% endblock %}
